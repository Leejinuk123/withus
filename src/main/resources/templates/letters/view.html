<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>í¸ì§€ ì½ê¸°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- âœ… iOS ì „ì²´í™”ë©´ ì›¹ì•± ì„¤ì • -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="WithUs">
  <!-- iOS í™ˆí™”ë©´ ì•„ì´ì½˜ -->
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/withuslogo.png">

  <!-- ë¸Œë¼ìš°ì € íƒ­ ì•„ì´ì½˜ -->
  <link rel="icon" type="image/x-icon" href="/icons/favicon.ico">

  <style>
    body { font-family: sans-serif; background: #fdf6f0; padding: 20px; }
    .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.05); }
    .locked { font-size: 20px; text-align: center; color: #ff6b81; margin-top: 50px; }
    .content { font-size: 16px; white-space: pre-wrap; }
    .meta { font-size: 12px; color: #888; margin-top: 10px; }
    .btn-delete {
      margin-top: 20px; display: block; width: 100%;
      padding: 12px; background-color: #ffb6b6;
      border: none; border-radius: 8px; color: white;
      font-size: 16px; cursor: pointer;
    }
    .btn-delete:hover { background-color: #ff8c8c; }
  </style>
</head>
<body>
<div class="container">
  <div th:if="${letter != null}">
    <!-- ğŸ”’ ì ê¸ˆëœ ê²½ìš° - ë°›ëŠ” ì‚¬ëŒë§Œ ì œí•œ (ë³´ë‚¸ ì‚¬ëŒì€ ë³¼ ìˆ˜ ìˆìŒ) -->
    <div th:if="${locked}" class="locked">
      ğŸ”’ ì•„ì§ ì—´ ìˆ˜ ì—†ëŠ” í¸ì§€ì˜ˆìš”<br>
      <span th:text="${#temporals.format(letter.unlockDate, 'yyyy.MM.dd HH:mm')}">í•´ì œ ë‚ ì§œ</span> ì´í›„ì— ì—´ ìˆ˜ ìˆì–´ìš”.
    </div>

    <!-- ğŸ”“ ë‚´ìš© ë³´ê¸° (ë³´ë‚¸ ì‚¬ëŒì´ê±°ë‚˜ unlockDate ì´í›„ì¸ ê²½ìš°) -->
    <div th:unless="${locked}">
      <div class="content" th:text="${letter.content}">í¸ì§€ ë‚´ìš©</div>
      <div class="meta">
        ë³´ë‚¸ ë‚ ì§œ: <span th:text="${#temporals.format(letter.createdAt, 'yyyy.MM.dd HH:mm')}">ì‘ì„± ì‹œê°„</span>
      </div>

      <!-- ì‚­ì œ ë²„íŠ¼ -->
      <form th:action="@{'/letters/' + ${letter.id} + '/delete'}" method="post">
        <button type="submit" class="btn-delete">ì‚­ì œí•˜ê¸°</button>
      </form>
    </div>
  </div>

  <div th:if="${letter == null}">
    <p>í¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
  </div>
</div>

<style>
  .bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #fff0f5;
    border-top: 2px solid #ffc1cc;
    display: flex;
    justify-content: space-around;
    padding: 12px 0;
    z-index: 999;
    font-family: 'Helvetica', sans-serif;
  }

  .bottom-nav a {
    text-decoration: none;
    color: #cc5a71;
    font-size: 15px;
    font-weight: bold;
    padding: 6px 10px;
    border-radius: 10px;
    transition: background 0.3s, color 0.3s;
  }

  .bottom-nav a:hover {
    background: #ffe4ec;
    color: #e75480;
  }

  .bottom-nav a.active {
    background: #ffb6c1;
    color: white;
    box-shadow: 0 0 5px rgba(255, 182, 193, 0.6);
  }
</style>

<nav class="bottom-nav">
  <a href="/" th:classappend="${currentURI == '/' ? 'active' : ''}">ğŸ  ë©”ì¸</a>
  <a href="/letters/received" th:classappend="${currentURI.startsWith('/letters/received') ? 'active' : ''}">ğŸ“¬ ë°›ì€ í¸ì§€í•¨</a>
  <a href="/letters/sent" th:classappend="${currentURI.startsWith('/letters/sent') ? 'active' : ''}">ğŸ“¤ ë³´ë‚¸ í¸ì§€í•¨</a>
  <a href="/letters/write" th:classappend="${currentURI.startsWith('/letters/write') ? 'active' : ''}">ğŸ’Œ í¸ì§€ ì“°ê¸°</a>
</nav>

</body>
</html>
